<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link media="all" rel="stylesheet" th:href="@{/css/navigation.css}" type="text/css"/>
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/profile.css}" type="text/css">

    <title>Document</title>
</head>
<body>
<header th:insert="navigation.html ::navigation"></header>

<main>
    <div class="container" style="margin-top: 7px">
        <div class="row">
            <div class="col-md-2">
            </div>

                <div class="col-md-8" style="border: 5px groove white; background: #363a3a;">
                <div class="text-center">
                    <form th:action="@{/update-profile}" th:method="post" enctype="multipart/form-data" style="margin: 5px;">
                        <img id="img1" class="img-thumbnail" th:if="${user.getImage() == null}" th:src="@{/images/defaultUser.jpg}">
                        <img id="img2" class="img-thumbnail" style="height: 15rem;" th:if="${user.getImage() != null}" th:src="*{'data:image/jpeg;base64,'+{user.getImage()}}">
                    </form>
                </div>

                <form th:action="@{/update-profile}" th:method="post" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="image" class="form-label">Фото профілю</label>
                        <input onchange="setImage(this)" class="form-control" name="image" accept=".png, .jpg, .jpeg, .jfif" type="file" id="image">
                    </div>
                    <div class="mb-3">
                        <label for="username" class="form-label">Ім'я користувача</label>
                        <input type="text" th:value="${user.getUsername()}" name="username" class="form-control" id="username" required>
                    </div>
                    <div class="mb-3">
                        <label for="name" class="form-label">Ім'я</label>
                        <input type="text" th:value="${user.getName()}" name="name" class="form-control" id="name" required>
                    </div>
                    <div class="mb-3">
                        <label for="surname" class="form-label">Прізвище</label>
                        <input type="text" th:value="${user.getSurname()}" name="surname" class="form-control" id="surname" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Дата народження</label>
                        <input type="date" th:if="${date == null}" name="dateOfBirth" class="form-control" min="1940-01-01" max="2004-01-01" value="2003-07-05" required>
                        <input type="date" th:if="${date != null}" th:value="${date}" name="dateOfBirth" class="form-control" min="1940-01-01" max="2004-01-01" required>
                    </div>
                    <div class="mb-3">
                        <label for="description" class="form-label">Опис</label>
                        <textarea class="form-control" th:text="${user.getDescription()}" id="description" name="description" placeholder="М 13 ищу девушку для отношений пиши в лс" rows="3"></textarea>
                    </div>
                    <div class="col-auto">
                        <button type="submit" class="btn btn-primary mb-3" style="float: right;">Підтвердити зміни</button>
                    </div>

                </form>
                <form th:action="@{/logout}" method="post">
                    <div class="d-grid gap-2">
                        <input class="btn btn-danger" type="submit" value="Вийти з акаунту" style="margin: 5px;">
                    </div>
                </form>
            </div>

            <div class="col-md-2">

            </div>
        </div>
    </div>
</main>
<script th:src="@{https://kit.fontawesome.com/8144c1797c.js}" crossorigin="anonymous"></script>
<script th:src="@{/js/bootstrap.min.js}"></script>
<script th:src="@{/js/profile.js}"></script>
</body>
</html>